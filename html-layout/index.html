<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <style>
    body { margin: 0; }
    svg { width: 100%; height: 100vh; }
    .tooltip {
      position: absolute;
      padding: 5px 10px;
      background: rgba(0,0,0,0.7);
      color: white;
      pointer-events: none;
      border-radius: 4px;
      font-size: 12px;
    }
  </style>
</head>
<body>
  <svg></svg>
  <div class="tooltip" style="opacity: 0;"></div>

  <script>
    const width = window.innerWidth;
    const height = window.innerHeight;
    const svg = d3.select("svg");
    const tooltip = d3.select(".tooltip");

    const targetCountries = ['India', 'USA', 'United Kingdom', 'Japan', 'Australia'];
    const highlightColor = '#ef7717';
    const defaultColor = '#fff4b2';

    const projection = d3.geoMercator()
      .scale(130)
      .translate([width / 2, height / 1.5]);

    const path = d3.geoPath().projection(projection);

    // Load GeoJSON world data
    d3.json("./places.geojson").then(data => {
      svg.selectAll("path")
        .data(data.features)
        .join("path")
        .attr("d", path)
        .attr("fill", d => {
          return targetCountries.includes(d.properties.name) ? highlightColor : defaultColor;
        })
        .attr("stroke", "#333")
        .attr("stroke-width", 0.5)
        .on("mouseover", function (event, d) {
          tooltip.transition().duration(200).style("opacity", .9);
          tooltip.html(`<strong>${d.properties.name}</strong>`)
            .style("left", (event.pageX + 10) + "px")
            .style("top", (event.pageY - 20) + "px");
        })
        .on("mouseout", () => tooltip.transition().duration(500).style("opacity", 0));
    });
  </script>
</body>
</html>
